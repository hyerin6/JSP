**Chpater10**

## 1. 세션 사용하기 : session 기본 객체  
웹 브라우저에 정보를 보관할 때 쿠키를 사용한다면, 세션은 웹 컨테이너 정보를 보관할 때 사용한다.   
세션은 오직 서버에만 생성된다.   
웹 컨테이너는 기본적으로 한 웹 브라우저마다 한 세션을 사용한다.   
즉, 같은 jsp 페이지라도 웹 브라우저에 따라 서로 다른 세션을 사용한다.   
  
웹 브라우저마다 세션이 따로 존재하기 때문에 세션은 웹 브라우저와 관련된 정보를 저장하기에 알맞은 장소이다.     
세션을 생성해야만 정보를 저장할 수 있다.   
일단 세션을 생성하면 session 기본 객체를 통해서 세션을 사용할 수 있다.   
  
##### (1) 세션 생성하기     
jsp에서 세션을 생성하려면 page 디렉티브의 session 속성을 “true”로 지정하면 된다.   
```  
<%@ page contentType = … %>   
<%@ page session = “true” %>   
<%  
session.setAtttribute(“userInfo”, userInfo);  
%>  
```  
page 디렉티브의 session 속성은 기본값이 true 이므로 false로 지정하지만 않으면 세션이 생성된다.   
세션을 사용하는 서버 프로그램에 웹 브라우저가 처음 접속할 때 세션을 생성하고,   
이후로는 이미 생성된 세션을 사용한다.   

##### (2) session 기본 객체   
세션을 사용한다는 것은 session 기본 객체를 사용한다는 것을 말한다.   
request 기본 객체와 마찬가지로 속성을 제공하므로 setAttribute(), getAttribute() 등의   
메소드를 사용하여 속성값을 저장하거나 읽어올 수 있다.    
추가로 세션은 세션만의 고유 정보를 제공하며, 이들 정보를 구할 때 사용하는 메소드는 아래와 같다.   

- String getId() : 세션의 고유 ID를 구한다.  
- long getCreationTime() : 세션이 생성된 시간을 구한다.   
- long getLastAccessedTime() : 웹 브라우저가 가장 마지막에 세션에 접근한 시간을 구한다.  

##### (3) 기본 객체의 속성 사용   
한 번 생성된 세션은 지정한 유효 시간 동안 유지된다. 
따라서, 웹 어플리케이션을 실행하는 동안 지속적으로 사용해야 하는 데이터의 저장소로 세션이 적당하다.    
request 기본 객체가 하나의 요청을 처리하는 데 사용되는 jsp 페이지 사이에서 공유된다면,  
session 기본 객체는 웹 브라우저의 여러 요청을 처리하는 jsp 페이지 사이에서 공유된다.  
따라서, 로그인한 회원 정보 등 웹 브라우저와 일대일로 관련된 값을 저장할 때에는 쿠키 대신 세션을 사용할 수 있다.  

세션의 값을 저장할 때는 속성을 사용한다. 속성에 값을 저장하려면 setAttribute() 메소드를 사용하고,  
속성값을 읽으려면 getAttribute() 메소드를 사용한다.   
**chap10/setMemberInfo.jsp 참고**   

##### (4) 세션 종료  
세션을 유지할 필요가 없으면 session.invalidate() 메소드를 사용해서 세션을 종료한다.  
세션을 종료하면 현재 사용중인 session 기본 객체를 삭제하고 session 기본 객체에 저장했던 속성 목록도 함께 삭제한다.  

##### (5) 세션 유효 시간 - 생략

##### (6) request.getSession()을 이용한 세션 생성   
httpSession을 생성하는 또 다른 방법은 request 기본 객체의 getSession()를 사용하는 것이다.  
request.getSession() 메소드는 현재 요청과 관련된 session 객체를 리턴한다.  
request.getSession()를 사용하여 세션을 구하므로, page 디렉티브의 session 속성은 false로 지정한다.  

## 2. 세션을 사용한 로그인 상태 유지  
세션을 사용해서 로그인을 처리하는 방식은 쿠키를 사용한 방식과 비슷하다.

- 로그인에 성공하면 session 기본 객체의 특정 속성에 데이터를 기록한다.  
- 이후로 session 기본 객체의 특정 속성이 존재하면 로그인한 것으로 간주한다.  
- 로그아웃할 경우 session.invalidate() 메소드를 호출하여 세션을 종료한다.  

##### (1) 인증된 사용자 정보 session 기본 객체에 저장하기 










